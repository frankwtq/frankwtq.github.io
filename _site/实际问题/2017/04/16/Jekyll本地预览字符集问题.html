<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Project-Gaia</title>

    <!-- Bootstrap CSS -->
<link href="http://localhost:4000/css/bootstrap.min.css" rel='stylesheet' type='text/css'/>
<link href="http://localhost:4000/css/simple-sidebar.css" rel='stylesheet' type='text/css'/>
<link href="http://localhost:4000/css/font-awesome.min.css" rel='stylesheet' type='text/css'/>
<link href="http://localhost:4000/css/global.css" rel='stylesheet' type='text/css'/>
<link href="http://localhost:4000/css/footer.css" rel='stylesheet' type='text/css'/>



    <!-- HighLighter -->
    <link href="http://localhost:4000/css/shCore.css" rel='stylesheet' type='text/css'/>
    <link href="http://localhost:4000/css/shCoreRDark.css" rel='stylesheet' type='text/css'/>
    <link href="http://localhost:4000/css/shThemeRDark.css" rel='stylesheet' type='text/css'/>

    <link href="http://localhost:4000/css/post.css" rel='stylesheet' type="text/css"/>
    <link href="http://localhost:4000/css/md-post-header-collapse.css" rel='stylesheet' type="text/css"/>
    <link href="http://localhost:4000/css/toc.css" rel='stylesheet' type="text/css"/>

</head>
<body>

    <div id="wrapper" >

        
<!-- Toggle Button -->
 <a href="#menu-toggle" class="btn btn-outline-link hidden-xs-down" id="menu-toggle">
     <i class="fa fa-bars" aria-hidden="true"></i>
 </a>

 <!-- Sidebar for desktop -->
 <div id="sidebar-wrapper" class="hidden-xs-down">
    <nav class="nav nav-pills flex-sm-row p-3 justify-content-center">
        <a class="flex-sm-fill text-sm-center nav-link active" href="#sidebar-home-content" data-toggle="tab" role="tab" id="home">Home</a>
        <a class="flex-sm-fill text-sm-center nav-link hidden-xl-down" href="#sidebar-toc-content" data-toggle="tab" role="tab" id="toc">Toc</a>
    </nav>
    <div class="tab-content" id=tab-content>
        <div class="tab-pane text-sm-center active" id="sidebar-home-content">
            <img class="site-author-image m-2" itemprop="image" src=" http://comic.szhshp.org/comic/10101/headshot/0 (2).png">
            <div class="text-warning">Frankwtq</div>
            <ul class="sidebar-nav">
    <li title="Home">
        <a href="http://localhost:4000/index.html">
            <i class="fa fa-home" aria-hidden="true"></i>
            Home  
        </a>
    </li>
    <li title="archives">
        <a href="http://localhost:4000/index.html#archives">
            <i class="fa fa-file-archive-o" aria-hidden="true"></i>
            Archives  
            <span class="badge badge-primary">8</span>
        </a>
    </li>
    <li title="categories">
        <a href="http://localhost:4000/categories.html">
            <i class="fa fa-tags" aria-hidden="true"></i>
            Categories 
            <span class="badge badge-primary">3</span>
        </a>
    </li>
    <li title="留言板">
        <a href="http://localhost:4000/about.html" >
            <i class="fa fa-comments" aria-hidden="true"></i>
            Messager
        </a>
    </li>
</ul>
        </div>
        <div class="tab-pane fade text-sm-left" id="sidebar-toc-content">
        </div>
    </div>
</div>

<!-- Navbar for xsmall screen  -->
<div class="hidden-sm-up">
    <nav class="navbar navbar-toggleable-md navbar-light bg-faded">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">Project-Gaia</a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="sidebar-nav">
    <li title="Home">
        <a href="http://localhost:4000/index.html">
            <i class="fa fa-home" aria-hidden="true"></i>
            Home  
        </a>
    </li>
    <li title="archives">
        <a href="http://localhost:4000/index.html#archives">
            <i class="fa fa-file-archive-o" aria-hidden="true"></i>
            Archives  
            <span class="badge badge-primary">8</span>
        </a>
    </li>
    <li title="categories">
        <a href="http://localhost:4000/categories.html">
            <i class="fa fa-tags" aria-hidden="true"></i>
            Categories 
            <span class="badge badge-primary">3</span>
        </a>
    </li>
    <li title="留言板">
        <a href="http://localhost:4000/about.html" >
            <i class="fa fa-comments" aria-hidden="true"></i>
            Messager
        </a>
    </li>
</ul>
        </div>
    </nav>
</div>

       <!-- Page Content -->
<div id="page-content-wrapper">
    <div class="container-fluid" id="post-content">
        <div class="row">
            <div class="col-md-12">
                <div class="page-header">
                    <h1 class="text-danger">
                        Jekyll本地预览字符集问题
                    </h1>
                    2017-04-16
                </div>
                <h1 id="jekyll本地预览字符集问题">Jekyll本地预览字符集问题</h1>

<h2 id="问题描述">问题描述</h2>

<p>在使用Jekyll搭建github pages时,含有中文的.md文件上传到github上github pages能够正常显示，在linux中的Jekyll本地环境中预览博客时却无法打开。在点击中文博文时服务器反馈错误信息：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ERROR Encoding::CompatibilityError: incompatible character encodings: UTF-8 and ASCII-8BIT
</code></pre>
</div>

<h2 id="问题解决">问题解决</h2>

<p>参考文章<a href="http://blog.csdn.net/yinaoxiong/article/details/54025482">解决jekyll无法本地预览中文文件的问题</a>后，解决了这个问题。解决方法如下：</p>

<p>修改服务器报错反馈会的目录xxx\xxx\lib\ruby\2.3.3\webrick\httpservlet中的fealhandler.rb文件</p>

<p>找到下列两处，添加一句（+开头的一行为添加的内容）</p>

<ol>
  <li>code：
    <div class="highlighter-rouge"><pre class="highlight"><code>path = req.path_info.dup.force_encoding(Encoding.find("filesystem"))
 + path.force_encoding("UTF-8") # 加入编码
 if trailing_pathsep?(req.path_info)
</code></pre>
    </div>
  </li>
  <li>code:
    <div class="highlighter-rouge"><pre class="highlight"><code>break if base == "/"
 + base.force_encoding("UTF-8") #加入編碼
 break unless File.directory?(File.expand_path(res.filename + base))
</code></pre>
    </div>
  </li>
</ol>

<p>修改完后重新运行<code class="highlighter-rouge">jekyll server</code>就可以支持中文文件名了。</p>



                <!-- don't delete this div as this is header collapse end identified  -->
                <div id="content-end"><h1>Comment Box</h1></div>
                <div>(update the code to your comment plugin in comment-full.html)</div>
            </div>

        </div>
    </div>
<!-- /#page-content-wrapper -->
      <!-- <div class="row">
    <div class="col-md-12">
        <div id="disqus_thread"></div>
        <script>
          var disqus_config = function () {
            this.page.url = 'http://szhshp.org/tech/2017/01/09/projectgaia.html';  
            this.page.identifier = 'http://szhshp.org/tech/2017/01/09/projectgaia.html';
          };
          
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://szhshp.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</div> -->
	<footer class="mt-5 pt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <strong>Credits</strong>
        <table class="table table-sm">
          <tr>
            <td>Main Director:</td>
            <td><a href="szhshp.org">Szhshp</a></td>
          </tr>
          <tr>
            <td>Dev Engine:</td>
            <td>Ruby x Jekyll</td>
          </tr>
            <tr>
              <td>Vi Director:</td>
              <td>Bootstrap</td>
            </tr>
            <tr>
              <td>Co-Vi Director</td>
              <td>Stylish Portfolio</td>
            </tr>
          </table>
          <p class="text-muted">Copyright &copy;  2017</p>
        </div>

        <div class="col-md-6">
          <strong>Friend Links</strong>
          <table class="table table-sm">
            <tr>
              <td><a href="http://szhshp.org"> szhshp.org</a></td>
            </tr>
          </table>
        </div>

      </div>
    </div>  
  </footer>

    </div>

    <!-- jQuery first, then Tether, then Bootstrap JS. -->
<script src="http://localhost:4000/js/jquery-3.1.1.min.js"></script>
<script src="http://localhost:4000/js/tether.min.js"></script>
<script src="http://localhost:4000/js/bootstrap.min.js"></script>

   <!-- Highlighter  -->
   <script src="http://localhost:4000/js/shCore.js" type='text/javascript'></script>
   <!-- <script src="http://localhost:4000/js/shBrushCSharp.js" type='text/javascript'></script> -->
   <script src="http://localhost:4000/js/shBrushColdFusion.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushCpp.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushCss.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushJava.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushPhp.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushRuby.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushSql.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushXml.js" type='text/javascript'></script>
   <script src="http://localhost:4000/js/shBrushJScript.js" type='text/javascript'></script>

   <!-- Header collapse -->
   <script src="http://localhost:4000/js/md-post-header-collapse.js" type="text/javascript"></script>

   <script src="http://localhost:4000/js/sidebar.js" type="text/javascript"></script>
   <script src="http://localhost:4000/js/post.js" type="text/javascript"></script>
   <script src="http://localhost:4000/js/toc.js" type="text/javascript"></script>


</body>
</html>

